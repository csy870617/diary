<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content">
    <title>신앙일지 | Faith Log</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&family=Noto+Serif+KR:wght@300;400;600&family=Pretendard:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>
<body>
    <div class="layout" id="main-layout">
        <header class="brunch-header">
            <div class="header-left">
                <h1>Faith Log</h1>
                <span class="sub-logo">기록이 믿음이 되는 순간</span>
            </div>
            <div class="header-right">
                <div class="search-container" id="search-container">
                    <i class="ph ph-magnifying-glass" id="search-trigger"></i>
                    <input type="text" id="search-input" placeholder="검색어를 입력하세요">
                </div>
                <div class="auth-area">
                    <button id="login-trigger-btn" class="login-btn-header">로그인</button>
                    <button id="logout-btn" class="login-btn-header hidden">로그아웃</button>
                </div>
            </div>
        </header>

        <div class="nav-row">
            <div class="tabs" id="tab-container"></div>
            <div class="nav-actions">
                <div class="sort-control">
                    <i class="ph ph-sort-descending" id="sort-icon"></i>
                    <select class="sort-select" id="sort-criteria">
                        <option value="created">최신순</option>
                        <option value="modified">수정순</option>
                        <option value="title">제목순</option>
                    </select>
                    <button id="sort-order-btn" class="hidden"></button>
                </div>
                <div class="divider-vertical"></div>
                <button class="icon-nav-btn trash" id="trash-btn" title="휴지통">
                    <i class="ph ph-trash"></i>
                </button>
            </div>
        </div>

        <main id="entry-list" class="entry-list"></main>

        <div class="floating-pen" id="write-btn">
            <i class="ph ph-pencil-simple"></i>
        </div>
    </div>

    <div id="write-modal" class="full-screen-modal hidden">
        <div class="write-header">
            <button id="close-write-btn" class="text-btn">취소</button>
            <span class="write-category" id="display-category">기록</span>
            <button id="publish-btn" class="publish-btn">발행</button>
        </div>
        
        <div class="editor-container">
            <input type="text" id="edit-title" class="editor-title" placeholder="제목" autocomplete="off">
            <input type="text" id="edit-subtitle" class="editor-subtitle" placeholder="소제목" autocomplete="off">
            <div class="divider"></div>
            <div id="editor-body" class="editor-body" contenteditable="true" placeholder="이곳에 은혜를 기록하세요..."></div>
        </div>

        <div id="sticker-palette" class="sticker-palette hidden">
            <div id="sticker-grid" class="sticker-grid"></div>
        </div>

        <div id="color-palette-popup" class="color-palette-popup hidden">
            <div class="color-grid">
                <button class="color-dot" style="background-color: #000000;" data-color="#000000" title="검정"></button>
                <button class="color-dot" style="background-color: #EF4444;" data-color="#EF4444" title="빨강"></button>
                <button class="color-dot" style="background-color: #F59E0B;" data-color="#F59E0B" title="주황"></button>
                <button class="color-dot" style="background-color: #10B981;" data-color="#10B981" title="초록"></button>
                <button class="color-dot" style="background-color: #3B82F6;" data-color="#3B82F6" title="파랑"></button>
                <button class="color-dot" style="background-color: #8B5CF6;" data-color="#8B5CF6" title="보라"></button>
                
                <button class="color-dot" style="background-color: #808080;" data-color="#808080" title="기본 회색"></button>
                <button class="color-dot" style="background-color: #FF0000;" data-color="#FF0000" title="기본 빨강"></button>
                <button class="color-dot" style="background-color: #FFA500;" data-color="#FFA500" title="기본 주황"></button>
                <button class="color-dot" style="background-color: #008000;" data-color="#008000" title="기본 녹색"></button>
                <button class="color-dot" style="background-color: #0000FF;" data-color="#0000FF" title="기본 파랑"></button>
                <button class="color-dot" style="background-color: #800080;" data-color="#800080" title="기본 보라"></button>
            </div>
        </div>

        <div class="editor-toolbar">
            <div class="tool-group">
                <select id="font-selector" class="font-select">
                    <option value="Pretendard">고딕</option>
                    <option value="Noto Serif KR">명조</option>
                    <option value="Nanum Pen Script">손글씨</option>
                </select>
                <div class="font-size-controls">
                    <button class="tool-btn small" id="btn-global-size-down">가-</button>
                    <button class="tool-btn small" id="btn-global-size-up">가+</button>
                </div>
            </div>
            
            <div class="toolbar-divider"></div>

            <div class="tool-group">
                <button class="tool-btn" data-cmd="justifyLeft"><i class="ph ph-text-align-left"></i></button>
                <button class="tool-btn" data-cmd="justifyCenter"><i class="ph ph-text-align-center"></i></button>
                <button class="tool-btn" data-cmd="justifyRight"><i class="ph ph-text-align-right"></i></button>
            </div>

            <div class="toolbar-divider"></div>

            <div class="tool-group">
                <button class="tool-btn" id="toolbar-color-btn"><i class="ph ph-palette" style="color:#F59E0B;"></i></button>
                <button class="tool-btn" id="sticker-btn"><i class="ph ph-smiley"></i></button>
            </div>
        </div>

        <div id="floating-menu" class="floating-menu hidden">
            <button class="float-btn" id="btn-float-color"><i class="ph ph-palette" style="color:#FCD34D;"></i></button>
            <div class="float-divider"></div>
            <button class="float-btn" data-cmd="bold"><i class="ph ph-text-b"></i></button>
            <button class="float-btn" data-cmd="italic"><i class="ph ph-text-italic"></i></button>
            <div class="float-divider"></div>
            <button class="float-btn small" id="btn-sel-size-down">가-</button>
            <button class="float-btn small" id="btn-sel-size-up">가+</button>
        </div>
    </div>

    <div id="read-modal" class="full-screen-modal hidden">
        <div class="read-header">
            <button id="close-read-btn" class="back-btn"><i class="ph ph-arrow-left"></i> 목록</button>
            <div class="read-actions">
                <div class="view-mode-group">
                    <button id="mode-btn-default" class="text-btn icon-only active" title="기본 보기"><i class="ph ph-scroll"></i></button>
                    <button id="mode-btn-focus" class="text-btn icon-only" title="읽기 전용"><i class="ph ph-eye"></i></button>
                    <button id="mode-btn-book" class="text-btn icon-only" title="책 모드"><i class="ph ph-book-open"></i></button>
                </div>
                <button id="share-read-btn" class="text-btn icon-only" title="공유하기" style="margin-left: 8px;"><i class="ph ph-share-network"></i></button>
            </div>
        </div>

        <div id="book-nav-left" class="book-nav prev hidden"><i class="ph ph-caret-left"></i></div>
        <div id="book-nav-right" class="book-nav next hidden"><i class="ph ph-caret-right"></i></div>
        <button id="exit-focus-btn" class="exit-focus-btn hidden"><i class="ph ph-x"></i></button>

        <div class="read-content-area" id="read-content-area">
            <h1 id="read-title"></h1>
            <div class="read-sub-row">
                <h3 id="read-subtitle"></h3>
                <div class="read-meta">
                    <span id="read-category" class="meta-category"></span>
                    <span class="meta-divider">|</span>
                    <span id="read-date" class="meta-date"></span>
                </div>
            </div>
            <div class="divider"></div>
            <div id="read-body" class="article-body"></div>
            <div id="page-indicator" class="page-indicator hidden"></div>
        </div>
    </div>

    <div id="login-modal" class="full-screen-modal hidden">
        <button id="close-login-btn" class="btn-close-modal"><i class="ph ph-x"></i></button>
        <div class="login-wrapper">
            <div class="login-content">
                <div class="login-logo">
                    <h2>Faith Log</h2>
                    <p>당신의 영적 여정을 기록하세요</p>
                </div>
                <form id="login-form">
                    <div class="input-field">
                        <input type="email" id="login-email" placeholder="이메일 주소" required>
                    </div>
                    <div class="input-field">
                        <input type="password" id="login-pw" placeholder="비밀번호" required>
                    </div>
                    <div class="login-actions">
                        <label class="check-container">
                            <input type="checkbox" id="save-id-check">
                            <span class="checkmark"></span> 아이디 저장
                        </label>
                        <button id="forgot-pw-btn">비밀번호 찾기</button>
                    </div>
                    <button type="submit" class="btn-login-submit">로그인</button>
                </form>
                <div class="login-footer">
                    <button id="signup-btn">회원가입</button>
                </div>
            </div>
        </div>
    </div>

    <div id="trash-modal" class="full-screen-modal hidden">
        <div class="read-header">
            <button id="close-trash-btn" class="back-btn"><i class="ph ph-arrow-left"></i> 뒤로</button>
            <h3>휴지통</h3>
            <div style="width: 40px;"></div>
        </div>
        <div class="trash-container" id="trash-list"></div>
    </div>

    <div id="reset-pw-modal" class="modal-overlay hidden">
        <div class="simple-modal">
            <h3>비밀번호 재설정</h3>
            <p style="font-size:13px; color:#666; margin-bottom:15px;">가입한 이메일을 입력하세요.</p>
            <input type="email" id="reset-email" placeholder="email@example.com">
            <div class="modal-btns">
                <button id="send-reset-email-btn" class="primary-btn">전송</button>
                <button id="close-reset-btn" class="cancel-btn">닫기</button>
            </div>
        </div>
    </div>

    <div id="context-menu" class="context-menu hidden">
        <button id="ctx-move" class="ctx-item"><i class="ph ph-folder-notch"></i> 주제 이동</button>
        <button id="ctx-lock" class="ctx-item"><i class="ph ph-lock"></i> 잠그기</button>
        <button id="ctx-copy" class="ctx-item"><i class="ph ph-copy"></i> 복제</button>
        <div style="height:1px; background:#eee; margin:4px 0;"></div>
        <button id="ctx-delete" class="ctx-item danger"><i class="ph ph-trash"></i> 삭제</button>
    </div>

    <div id="category-context-menu" class="context-menu hidden">
        <button id="ctx-cat-rename" class="ctx-item"><i class="ph ph-pencil"></i> 이름 변경</button>
        <button id="ctx-cat-delete" class="ctx-item danger"><i class="ph ph-trash"></i> 주제 삭제</button>
    </div>

    <div id="move-modal" class="modal-overlay hidden">
        <div class="simple-modal" style="width: 280px;">
            <h3>주제 이동</h3>
            <div id="move-category-list" class="category-select-list"></div>
            <button id="close-move-btn" class="cancel-btn" style="width:100%;">취소</button>
        </div>
    </div>

    <div id="lock-modal" class="modal-overlay hidden">
        <div class="simple-modal">
            <h3 id="lock-modal-title">비밀번호 설정</h3>
            <p id="lock-modal-desc" style="font-size:13px; color:#888;">이 글을 열 때 사용할 비밀번호</p>
            <input type="password" id="lock-pw-input" placeholder="비밀번호 4자리" maxlength="4" style="text-align:center; letter-spacing:4px; font-size:18px;">
            <div class="modal-btns">
                <button id="confirm-lock-btn" class="primary-btn">확인</button>
                <button id="close-lock-btn" class="cancel-btn">취소</button>
            </div>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>